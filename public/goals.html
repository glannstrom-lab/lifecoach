<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mina M√•l - Comdira</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/sidebar-v2.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Mina M√•l Page Styles */
        .goals-page {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Header Stats */
        .goals-header-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }
        
        .goal-stat-card {
            background: var(--bg-surface);
            border-radius: 20px;
            padding: 24px;
            text-align: center;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
        }
        
        .goal-stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }
        
        .goal-stat-icon {
            font-size: 36px;
            margin-bottom: 12px;
        }
        
        .goal-stat-value {
            font-size: 32px;
            font-weight: 800;
            color: var(--text-primary);
        }
        
        .goal-stat-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 4px;
        }
        
        /* AI Coach Banner */
        .ai-coach-banner {
            background: linear-gradient(135deg, #E8F5E8, #D4EFDF);
            border-radius: 24px;
            padding: 24px;
            margin-bottom: 32px;
            display: flex;
            align-items: flex-start;
            gap: 20px;
            border-left: 5px solid var(--primary-dark);
        }
        
        .ai-coach-avatar {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            flex-shrink: 0;
        }
        
        .ai-coach-content {
            flex: 1;
        }
        
        .ai-coach-title {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .ai-coach-text {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        .ai-coach-actions {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }
        
        .ai-btn {
            padding: 10px 20px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .ai-btn-primary {
            background: var(--primary);
            color: var(--text-primary);
        }
        
        .ai-btn-secondary {
            background: white;
            color: var(--text-secondary);
            border: 2px solid var(--primary-light);
        }
        
        /* Tabs */
        .goals-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            background: var(--bg-surface);
            padding: 8px;
            border-radius: 16px;
            box-shadow: var(--shadow-sm);
        }
        
        .goals-tab {
            flex: 1;
            padding: 14px 24px;
            border: none;
            border-radius: 12px;
            background: transparent;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .goals-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--text-primary);
            box-shadow: var(--shadow-sm);
        }
        
        .goals-tab .badge {
            background: rgba(0,0,0,0.1);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
        }
        
        /* Goal Cards */
        .goals-grid {
            display: grid;
            gap: 20px;
        }
        
        .goal-card {
            background: var(--bg-surface);
            border-radius: 24px;
            padding: 24px;
            box-shadow: var(--shadow-sm);
            border: 2px solid transparent;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .goal-card:hover {
            border-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .goal-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .goal-card:hover::before {
            opacity: 1;
        }
        
        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        
        .goal-title-section {
            flex: 1;
        }
        
        .goal-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .goal-meta {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .goal-tag {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .goal-tag.deadline { background: #FFF3E0; color: #E65100; }
        .goal-tag.dimension { background: #E8F5E8; color: #2E7D32; }
        .goal-tag.energy { background: #E3F2FD; color: #1565C0; }
        .goal-tag.smart { background: #F3E5F5; color: #7B1FA2; }
        
        .goal-menu {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-secondary);
            padding: 8px;
        }
        
        /* Progress Section */
        .goal-progress-section {
            margin: 20px 0;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .progress-percentage {
            font-size: 28px;
            font-weight: 800;
            color: var(--primary-dark);
        }
        
        .progress-bar-container {
            background: var(--primary-light);
            height: 16px;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 8px;
            transition: width 0.5s ease;
            position: relative;
        }
        
        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .progress-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* Milestones */
        .milestones-section {
            margin: 20px 0;
            padding: 20px;
            background: var(--bg-card);
            border-radius: 16px;
        }
        
        .milestones-title {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .milestone-track {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .milestone-node {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .milestone-node.completed {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            box-shadow: 0 4px 12px rgba(144, 238, 144, 0.4);
        }
        
        .milestone-node.pending {
            background: var(--primary-light);
            border: 3px dashed var(--primary);
        }
        
        .milestone-node.locked {
            background: #E0E0E0;
            color: #9E9E9E;
        }
        
        .milestone-connector {
            flex: 1;
            height: 4px;
            background: var(--primary-light);
            border-radius: 2px;
        }
        
        .milestone-connector.completed {
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }
        
        /* Compassion Pause Button */
        .compassion-pause {
            margin-top: 16px;
            padding: 12px 16px;
            background: linear-gradient(135deg, #FFF8E1, #FFECB3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            color: #F57C00;
        }
        
        .compassion-pause button {
            background: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            color: #F57C00;
        }
        
        /* Energy Impact */
        .energy-impact {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 16px;
            padding: 12px 16px;
            background: var(--bg-card);
            border-radius: 12px;
        }
        
        .energy-impact-icon {
            font-size: 24px;
        }
        
        .energy-impact-text {
            flex: 1;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .energy-impact-value {
            font-weight: 700;
            color: #4CAF50;
        }
        
        /* Win Wall */
        .win-wall-section {
            background: linear-gradient(135deg, #FFF8E1, #FFECB3);
            border-radius: 24px;
            padding: 24px;
            margin-bottom: 32px;
        }
        
        .win-wall-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .win-wall-title {
            font-size: 24px;
            font-weight: 700;
            color: #E65100;
        }
        
        .wins-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 16px;
        }
        
        .win-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: all 0.3s;
        }
        
        .win-card:hover {
            transform: scale(1.05) rotate(-2deg);
        }
        
        .win-emoji {
            font-size: 40px;
            margin-bottom: 8px;
        }
        
        .win-text {
            font-size: 13px;
            font-weight: 600;
            color: #E65100;
        }
        
        .win-date {
            font-size: 11px;
            color: #FF8F00;
            margin-top: 4px;
        }
        
        /* Heatmap */
        .heatmap-section {
            background: var(--bg-surface);
            border-radius: 24px;
            padding: 24px;
            margin-bottom: 32px;
        }
        
        .heatmap-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .heatmap-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .heatmap-legend {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }
        
        .heatmap-cell {
            aspect-ratio: 1;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .heatmap-cell:hover {
            transform: scale(1.2);
        }
        
        .heatmap-cell.level-0 { background: #E0E0E0; }
        .heatmap-cell.level-1 { background: #C8E6C9; }
        .heatmap-cell.level-2 { background: #90EE90; }
        .heatmap-cell.level-3 { background: #66BB6A; }
        .heatmap-cell.level-4 { background: #2E7D32; }
        
        /* Mountain Climb View */
        .mountain-view {
            background: linear-gradient(180deg, #E3F2FD 0%, #BBDEFB 50%, #90EE90 100%);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 32px;
            position: relative;
            min-height: 400px;
            overflow: hidden;
        }
        
        .mountain-silhouette {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 300px;
            background: linear-gradient(180deg, #5D4037 0%, #3E2723 100%);
            clip-path: polygon(0% 100%, 20% 60%, 40% 30%, 50% 10%, 60% 30%, 80% 60%, 100% 100%);
        }
        
        .mountain-climber {
            position: absolute;
            font-size: 32px;
            transition: all 0.5s ease;
            z-index: 10;
        }
        
        .mountain-flag {
            position: absolute;
            font-size: 40px;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
        }
        
        /* New Goal Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 24px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 32px;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 700;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
        
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--primary-light);
            border-radius: 12px;
            font-size: 16px;
            font-family: inherit;
            transition: all 0.3s;
        }
        
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px var(--primary-light);
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        /* Dimension Selector */
        .dimension-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }
        
        .dimension-option {
            padding: 16px;
            border: 2px solid var(--primary-light);
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .dimension-option:hover {
            border-color: var(--primary);
        }
        
        .dimension-option.selected {
            background: var(--primary);
            border-color: var(--primary);
        }
        
        .dimension-option .icon {
            font-size: 28px;
            display: block;
            margin-bottom: 8px;
        }
        
        .dimension-option .name {
            font-size: 12px;
            font-weight: 600;
        }
        
        /* Energy Selector */
        .energy-selector {
            display: flex;
            gap: 12px;
        }
        
        .energy-option {
            flex: 1;
            padding: 16px;
            border: 2px solid var(--primary-light);
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .energy-option.selected {
            background: #E8F5E8;
            border-color: #4CAF50;
        }
        
        .energy-option .icon {
            font-size: 32px;
            display: block;
            margin-bottom: 8px;
        }
        
        /* SMART Checklist */
        .smart-checklist {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
        }
        
        .smart-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--primary-light);
        }
        
        .smart-item:last-child {
            border-bottom: none;
        }
        
        .smart-checkbox {
            width: 24px;
            height: 24px;
            accent-color: var(--primary);
        }
        
        .smart-label {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .smart-hint {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        /* Action Buttons */
        .action-bar {
            position: sticky;
            bottom: 0;
            background: white;
            padding: 20px 0;
            border-top: 2px solid var(--primary-light);
            margin-top: 24px;
        }
        
        .btn-primary-lg {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border: none;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s;
        }
        
        .btn-primary-lg:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(144, 238, 144, 0.4);
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }
        
        .empty-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }
        
        .empty-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }
        
        .empty-text {
            color: var(--text-secondary);
            max-width: 400px;
            margin: 0 auto 24px;
        }
        
        /* Buddy System */
        .buddy-card {
            background: linear-gradient(135deg, #F3E5F5, #E1BEE7);
            border-radius: 20px;
            padding: 24px;
            margin-top: 24px;
        }
        
        .buddy-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .buddy-avatar {
            width: 56px;
            height: 56px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }
        
        .buddy-info h4 {
            color: #4A148C;
            margin-bottom: 4px;
        }
        
        .buddy-info p {
            color: #7B1FA2;
            font-size: 14px;
        }
        
        .buddy-message {
            background: white;
            border-radius: 16px;
            padding: 16px;
            font-style: italic;
            color: #4A148C;
        }
        
        @media (max-width: 768px) {
            .dimension-selector {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .energy-selector {
                flex-direction: column;
            }
            
            .goal-header {
                flex-direction: column;
                gap: 12px;
            }
            
            .milestone-track {
                overflow-x: auto;
                padding-bottom: 8px;
            }
        }
    </style>
</head>
<body>
    <!-- Demo-banner -->
    <div class="demo-banner">
        üöÄ DEMO-VERSION | Mina M√•l | 
        <a href="dashboard.html">‚Üê Tillbaka till Dashboard</a>
    </div>
    
    <div class="app-container">
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" onclick="toggleMobileSidebar()">‚ò∞</button>
        
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="dashboard.html" class="logo">
                    <div class="logo-icon-sm">C</div>
                    <span class="logo-text">Comdira</span>
                </a>
                <button class="sidebar-toggle" onclick="toggleSidebar()" title="Expandera/Kollapsa">
                    ‚óÄ
                </button>
            </div>
            
            <nav class="nav-menu">
                <a href="dashboard.html" class="nav-item" data-tooltip="Dashboard">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                    <span class="nav-item-text">Dashboard</span>
                </a>
                
                <a href="checkin.html" class="nav-item" data-tooltip="Dagens Check-in">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    <span class="nav-item-text">Dagens Check-in</span>
                </a>
                
                <!-- Wellness Hexagon with Submenu -->
                <div class="nav-item" onclick="toggleSubmenu(this)" data-tooltip="V√§lm√•endehexagonen">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                    <span class="nav-item-text">V√§lm√•endehexagonen</span>
                    <span class="nav-item-expand">‚ñ∂</span>
                </div>
                <div class="nav-submenu">
                    <a href="wellness.html" class="nav-subitem">
                        <span class="nav-subitem-icon">üìä</span>
                        <span class="nav-item-text">√ñversikt</span>
                    </a>
                    <a href="wellness.html#existential" class="nav-subitem existential" data-tooltip="Existentiellt">
                        <span class="nav-subitem-icon">üîÆ</span>
                        <span class="nav-item-text">Existentiellt</span>
                    </a>
                    <a href="wellness.html#emotional" class="nav-subitem emotional" data-tooltip="Emotionellt">
                        <span class="nav-subitem-icon">üíù</span>
                        <span class="nav-item-text">Emotionellt</span>
                    </a>
                    <a href="wellness.html#subjective" class="nav-subitem subjective" data-tooltip="Subjektivt">
                        <span class="nav-subitem-icon">‚ú®</span>
                        <span class="nav-item-text">Subjektivt</span>
                    </a>
                    <a href="wellness.html#occupational" class="nav-subitem occupational" data-tooltip="Yrkesm√§ssigt">
                        <span class="nav-subitem-icon">üíº</span>
                        <span class="nav-item-text">Yrkesm√§ssigt</span>
                    </a>
                    <a href="wellness.html#social" class="nav-subitem social" data-tooltip="Socialt">
                        <span class="nav-subitem-icon">üë•</span>
                        <span class="nav-item-text">Socialt</span>
                    </a>
                    <a href="wellness.html#practical" class="nav-subitem practical" data-tooltip="Vardagligt">
                        <span class="nav-subitem-icon">üõ†Ô∏è</span>
                        <span class="nav-item-text">Vardagligt</span>
                    </a>
                </div>
                
                <a href="goals.html" class="nav-item active" data-tooltip="Mina M√•l">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                    <span class="nav-item-text">Mina M√•l</span>
                </a>
                
                <a href="habits.html" class="nav-item" data-tooltip="Vanor">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v18"/><path d="m8 21 4 3 4-3"/><path d="M8 3 12 0l4 3"/></svg>
                    <span class="nav-item-text">Vanor</span>
                </a>
                
                <a href="journal.html" class="nav-item" data-tooltip="Journal">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                    <span class="nav-item-text">Journal</span>
                </a>
                
                <a href="coach.html" class="nav-item" data-tooltip="Coach">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                    <span class="nav-item-text">Coach</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <div class="sidebar-user">
                    <div class="sidebar-user-avatar">üë§</div>
                    <div class="sidebar-user-info">
                        <div class="sidebar-user-name">Demo Anv√§ndare</div>
                        <div class="sidebar-user-role">Premium</div>
                    </div>
                </div>
            </div>
        </aside>
        <div class="sidebar-overlay" onclick="toggleMobileSidebar()"></div>
        
        <!-- Main Content -->
        <main class="main-content">
            <div class="goals-page">
                
                <!-- Header Stats -->
                <div class="goals-header-stats">
                    <div class="goal-stat-card">
                        <div class="goal-stat-icon">üéØ</div>
                        <div class="goal-stat-value">4</div>
                        <div class="goal-stat-label">Aktiva m√•l</div>
                    </div>
                    <div class="goal-stat-card">
                        <div class="goal-stat-icon">‚úÖ</div>
                        <div class="goal-stat-value">12</div>
                        <div class="goal-stat-label">Avklarade</div>
                    </div>
                    <div class="goal-stat-card">
                        <div class="goal-stat-icon">üèÜ</div>
                        <div class="goal-stat-value">68%</div>
                        <div class="goal-stat-label">Snitt framg√•ng</div>
                    </div>
                    <div class="goal-stat-card">
                        <div class="goal-stat-icon">üî•</div>
                        <div class="goal-stat-value">23</div>
                        <div class="goal-stat-label">Dagar i streak</div>
                    </div>
                </div>
                
                <!-- AI Coach Banner -->
                <div class="ai-coach-banner">
                    <div class="ai-coach-avatar">ü§ñ</div>
                    <div class="ai-coach-content">
                        <div class="ai-coach-title">
                            Din AI-m√•lcoach
                            <span style="font-size: 12px; font-weight: 400; color: var(--text-light);">‚Ä¢ Baserat p√• dina 47 check-ins</span>
                        </div>
                        <p class="ai-coach-text" id="aiCoachText">
                            Jag ser att du har h√∂gst energi p√• tisdagar och torsdagar. 
                            Ditt m√•l "Springa 5km" har 85% h√∂gre chans att lyckas om du l√§gger det p√• dessa dagar. 
                            Dessutom: N√§r du n√•r tr√§ningsm√•len √§r ditt hum√∂r 34% h√∂ger enligt dina check-ins!
                        </p>
                        <div class="ai-coach-actions">
                            <button class="ai-btn ai-btn-primary" onclick="applyAISuggestion()">
                                üí° Justera schemat
                            </button>
                            <button class="ai-btn ai-btn-secondary" onclick="generateNewSuggestion()">
                                üé≤ Ny insikt
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Win Wall -->
                <div class="win-wall-section">
                    <div class="win-wall-header">
                        <h3 class="win-wall-title">üèÜ Vinnarv√§ggen</h3>
                        <span style="color: #E65100; font-size: 14px;">Samlade segrar</span>
                    </div>
                    <div class="wins-grid" id="winsGrid">
                        <!-- Dynamiskt genererat -->
                    </div>
                </div>
                
                <!-- Mountain Climb View -->
                <div class="mountain-view">
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--text-primary);">üóª Din Bestigning</h3>
                    <div class="mountain-silhouette"></div>
                    <div class="mountain-flag">üö©</div>
                    <div class="mountain-climber" id="mountainClimber" style="left: 20%; bottom: 20%;">üßó</div>
                    <div style="position: absolute; bottom: 20px; left: 20px; right: 20px; text-align: center;">
                        <p style="color: white; font-weight: 600; text-shadow: 0 2px 4px rgba(0,0,0,0.5);">
                            Du har n√•tt 75% av √•rets stora m√•l!
                        </p>
                    </div>
                </div>
                
                <!-- Heatmap -->
                <div class="heatmap-section">
                    <div class="heatmap-header">
                        <h3 class="heatmap-title">üî• Konsekvens-heatmap</h3>
                        <div class="heatmap-legend">
                            <span>Mindre</span>
                            <div style="display: flex; gap: 4px;">
                                <div style="width: 16px; height: 16px; background: #E0E0E0; border-radius: 3px;"></div>
                                <div style="width: 16px; height: 16px; background: #C8E6C9; border-radius: 3px;"></div>
                                <div style="width: 16px; height: 16px; background: #90EE90; border-radius: 3px;"></div>
                                <div style="width: 16px; height: 16px; background: #66BB6A; border-radius: 3px;"></div>
                                <div style="width: 16px; height: 16px; background: #2E7D32; border-radius: 3px;"></div>
                            </div>
                            <span>Mer</span>
                        </div>
                    </div>
                    <div class="heatmap-grid" id="heatmapGrid">
                        <!-- 49 dagar genereras -->
                    </div>
                    <p style="text-align: center; margin-top: 16px; color: var(--text-secondary); font-size: 14px;">
                        Senaste 7 veckorna ‚Ä¢ Genomsnittlig aktivitet: <strong style="color: var(--primary-dark);">H√∂g üî•</strong>
                    </p>
                </div>
                
                <!-- Tabs -->
                <div class="goals-tabs">
                    <button class="goals-tab active" onclick="switchTab('active')">
                        üî• Aktiva <span class="badge">4</span>
                    </button>
                    <button class="goals-tab" onclick="switchTab('completed')">
                        ‚úÖ Avklarade <span class="badge">12</span>
                    </button>
                    <button class="goals-tab" onclick="switchTab('paused')">
                        ‚è∏Ô∏è Pausade <span class="badge">2</span>
                    </button>
                </div>
                
                <!-- Goals Grid -->
                <div class="goals-grid" id="goalsGrid">
                    <!-- M√•l genereras av JavaScript -->
                </div>
                
                <!-- Buddy System Card -->
                <div class="buddy-card">
                    <div class="buddy-header">
                        <div class="buddy-avatar">üëã</div>
                        <div class="buddy-info">
                            <h4>M√•l-kompis: Anna</h4>
                            <p>Har st√∂ttat dig i 3 veckor</p>
                        </div>
                    </div>
                    <div class="buddy-message">
                        "Jag s√•g att du klarade milstolpen 'F√∂rsta 2km'! S√• stolt √∂ver dig! üéâ"
                    </div>
                </div>
                
                <!-- Floating Add Button -->
                <button class="btn btn-primary" onclick="openGoalModal()" 
                        style="position: fixed; bottom: 30px; right: 30px; width: 64px; height: 64px; 
                               border-radius: 50%; font-size: 32px; display: flex; align-items: center; 
                               justify-content: center; box-shadow: 0 8px 24px rgba(144, 238, 144, 0.5);
                               z-index: 100;">
                    +
                </button>
                
            </div>
        </main>
    </div>
    
    <!-- New Goal Modal -->
    <div class="modal-overlay" id="goalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üéØ Nytt M√•l</h2>
                <button class="modal-close" onclick="closeGoalModal()">&times;</button>
            </div>
            
            <form id="goalForm" onsubmit="saveGoal(event)">
                <div class="form-group">
                    <label class="form-label">Vad vill du uppn√•?</label>
                    <input type="text" class="form-input" id="goalTitle" 
                           placeholder="Ex: Springa 5km, L√§sa 12 b√∂cker, Meditera dagligen..." required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Beskrivning (valfritt)</label>
                    <textarea class="form-textarea" id="goalDescription" 
                              placeholder="Varf√∂r √§r detta m√•l viktigt f√∂r dig?"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">M√•ldatum</label>
                    <input type="date" class="form-input" id="goalDeadline">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Vilken dimension st√§rker detta?</label>
                    <div class="dimension-selector">
                        <div class="dimension-option" onclick="selectDimension(this, 'existential')">
                            <span class="icon">üîÆ</span>
                            <span class="name">Existentiellt</span>
                        </div>
                        <div class="dimension-option" onclick="selectDimension(this, 'emotional')">
                            <span class="icon">üíù</span>
                            <span class="name">Emotionellt</span>
                        </div>
                        <div class="dimension-option" onclick="selectDimension(this, 'subjective')">
                            <span class="icon">‚ú®</span>
                            <span class="name">Subjektivt</span>
                        </div>
                        <div class="dimension-option" onclick="selectDimension(this, 'occupational')">
                            <span class="icon">üíº</span>
                            <span class="name">Yrkesm√§ssigt</span>
                        </div>
                        <div class="dimension-option" onclick="selectDimension(this, 'social')">
                            <span class="icon">üë•</span>
                            <span class="name">Socialt</span>
                        </div>
                        <div class="dimension-option" onclick="selectDimension(this, 'practical')">
                            <span class="icon">üõ†Ô∏è</span>
                            <span class="name">Vardagligt</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Energip√•verkan</label>
                    <div class="energy-selector">
                        <div class="energy-option selected" onclick="selectEnergy(this, 'boost')">
                            <span class="icon">‚ö°</span>
                            <span>Ger energi</span>
                        </div>
                        <div class="energy-option" onclick="selectEnergy(this, 'maintain')">
                            <span class="icon">üîÑ</span>
                            <span>Beh√•ller energi</span>
                        </div>
                        <div class="energy-option" onclick="selectEnergy(this, 'drain')">
                            <span class="icon">üîã</span>
                            <span>Tar energi</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">SMART-kriterier</label>
                    <div class="smart-checklist">
                        <div class="smart-item">
                            <input type="checkbox" class="smart-checkbox" id="smartS">
                            <div>
                                <div class="smart-label">Specifikt (S)</div>
                                <div class="smart-hint">Tydligt vad som ska uppn√•s</div>
                            </div>
                        </div>
                        <div class="smart-item">
                            <input type="checkbox" class="smart-checkbox" id="smartM">
                            <div>
                                <div class="smart-label">M√§tbart (M)</div>
                                <div class="smart-hint">G√•r att m√§ta framsteg</div>
                            </div>
                        </div>
                        <div class="smart-item">
                            <input type="checkbox" class="smart-checkbox" id="smartA">
                            <div>
                                <div class="smart-label">Accepterat (A)</div>
                                <div class="smart-hint">Realistiskt och uppn√•eligt</div>
                            </div>
                        </div>
                        <div class="smart-item">
                            <input type="checkbox" class="smart-checkbox" id="smartR">
                            <div>
                                <div class="smart-label">Relevant (R)</div>
                                <div class="smart-hint">Viktigt f√∂r ditt v√§lm√•ende</div>
                            </div>
                        </div>
                        <div class="smart-item">
                            <input type="checkbox" class="smart-checkbox" id="smartT">
                            <div>
                                <div class="smart-label">Tidsbest√§mt (T)</div>
                                <div class="smart-hint">Har en tydlig deadline</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="action-bar">
                    <button type="submit" class="btn-primary-lg">
                        üéØ Skapa M√•l
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // Demo-m√•l
        let goals = [
            {
                id: 1,
                title: "Springa 5km under 30 minuter",
                description: "Bygga upp kondition f√∂r att m√• b√§ttre och ha mer energi",
                progress: 75,
                deadline: "2026-04-15",
                dimension: "practical",
                dimensionName: "Vardagligt",
                energy: "boost",
                milestones: [
                    { name: "1km", completed: true },
                    { name: "2km", completed: true },
                    { name: "3km", completed: true },
                    { name: "4km", completed: false },
                    { name: "5km", completed: false }
                ],
                currentValue: 3.75,
                targetValue: 5,
                unit: "km",
                streak: 12,
                lastCheckin: "2026-02-19"
            },
            {
                id: 2,
                title: "L√§sa 12 b√∂cker under 2026",
                description: "Utvecklas personligt och bredda perspektiv",
                progress: 33,
                deadline: "2026-12-31",
                dimension: "existential",
                dimensionName: "Existentiellt",
                energy: "boost",
                milestones: [
                    { name: "3 b√∂cker", completed: true },
                    { name: "6 b√∂cker", completed: false },
                    { name: "9 b√∂cker", completed: false },
                    { name: "12 b√∂cker", completed: false }
                ],
                currentValue: 4,
                targetValue: 12,
                unit: "b√∂cker",
                streak: 45,
                lastCheckin: "2026-02-20"
            },
            {
                id: 3,
                title: "Meditation 10 min dagligen",
                description: "Mindre stress och b√§ttre fokus",
                progress: 60,
                deadline: "2026-03-31",
                dimension: "emotional",
                dimensionName: "Emotionellt",
                energy: "maintain",
                milestones: [
                    { name: "7 dagar", completed: true },
                    { name: "14 dagar", completed: true },
                    { name: "21 dagar", completed: false },
                    { name: "30 dagar", completed: false }
                ],
                currentValue: 18,
                targetValue: 30,
                unit: "dagar",
                streak: 18,
                lastCheckin: "2026-02-20"
            },
            {
                id: 4,
                title: "Slutf√∂ra certifiering i projektledning",
                description: "Karri√§rutveckling och nya m√∂jligheter",
                progress: 40,
                deadline: "2026-06-30",
                dimension: "occupational",
                dimensionName: "Yrkesm√§ssigt",
                energy: "drain",
                milestones: [
                    { name: "Modul 1", completed: true },
                    { name: "Modul 2", completed: true },
                    { name: "Modul 3", completed: false },
                    { name: "Modul 4", completed: false },
                    { name: "Exam", completed: false }
                ],
                currentValue: 2,
                targetValue: 5,
                unit: "moduler",
                streak: 5,
                lastCheckin: "2026-02-18"
            }
        ];
        
        // Vinnare
        const wins = [
            { emoji: "üèÉ", text: "F√∂rsta 2km!", date: "15 feb" },
            { emoji: "üìö", text: "4:e boken klar", date: "12 feb" },
            { emoji: "üßò", text: "14 dagar meditation", date: "10 feb" },
            { emoji: "üéì", text: "Modul 2 klar", date: "5 feb" },
            { emoji: "üî•", text: "7-dagars streak", date: "1 feb" },
            { emoji: "‚≠ê", text: "M√•nadens m√•l", date: "31 jan" },
        ];
        
        // AI-f√∂rslag
        const aiSuggestions = [
            "Jag ser att du har h√∂gst energi p√• tisdagar och torsdagar. Ditt m√•l 'Springa 5km' har 85% h√∂gre chans att lyckas om du l√§gger det p√• dessa dagar.",
            "Din s√∂mnkvalitet har f√∂rb√§ttrats med 23% sedan du b√∂rjade med meditation. Forts√§tt med detta m√•l - det ger resultat!",
            "Baserat p√• dina check-ins: Du presterar b√§ttre p√• yrkesm√•l n√§r du har tr√§nat samma morgon. En tydlig koppling!",
            "Vecka 3 √§r kritisk f√∂r nya vanor. Du √§r just nu i vecka 2 av 'Meditation 10 min' - forts√§tt s√• g√•r det!",
            "Ditt hum√∂r √§r i snitt 1.2 po√§ng h√∂gre p√• dagar du l√§ser. Prioritera l√§sm√•let n√§r du k√§nner dig lite nere."
        ];
        
        let currentTab = 'active';
        let selectedDimension = null;
        let selectedEnergy = 'boost';
        
        // Rendera m√•l
        function renderGoals() {
            const grid = document.getElementById('goalsGrid');
            grid.innerHTML = '';
            
            goals.forEach(goal => {
                const card = createGoalCard(goal);
                grid.appendChild(card);
            });
        }
        
        function createGoalCard(goal) {
            const div = document.createElement('div');
            div.className = 'goal-card';
            
            // Milestones HTML
            const milestonesHtml = goal.milestones.map((m, i) => {
                const nodeClass = m.completed ? 'completed' : (i === 0 || goal.milestones[i-1].completed ? 'pending' : 'locked');
                const icon = m.completed ? '‚úì' : (i + 1);
                const connector = i < goal.milestones.length - 1 ? 
                    `<div class="milestone-connector ${m.completed && goal.milestones[i+1].completed ? 'completed' : ''}"></div>` : '';
                return `
                    <div class="milestone-node ${nodeClass}" title="${m.name}">${icon}</div>
                    ${connector}
                `;
            }).join('');
            
            // Energi-f√§rg
            const energyColors = {
                boost: '#4CAF50',
                maintain: '#FF9800',
                drain: '#F44336'
            };
            
            const energyText = {
                boost: 'Ger energi ‚ö°',
                maintain: 'Beh√•ller energi üîÑ',
                drain: 'Tar energi üîã'
            };
            
            // Dagar kvar
            const daysLeft = Math.ceil((new Date(goal.deadline) - new Date()) / (1000 * 60 * 60 * 24));
            
            div.innerHTML = `
                <div class="goal-header">
                    <div class="goal-title-section">
                        <div class="goal-title">${goal.title}</div>
                        <div class="goal-meta">
                            <span class="goal-tag deadline">üìÖ ${daysLeft} dagar kvar</span>
                            <span class="goal-tag dimension">${goal.dimensionName}</span>
                            <span class="goal-tag energy" style="background: ${energyColors[goal.energy]}20; color: ${energyColors[goal.energy]};">${energyText[goal.energy]}</span>
                            ${goal.streak > 7 ? `<span class="goal-tag smart">üî• ${goal.streak} dagar</span>` : ''}
                        </div>
                    </div>
                    <button class="goal-menu">‚ãÆ</button>
                </div>
                
                <div class="goal-progress-section">
                    <div class="progress-header">
                        <div>
                            <span style="color: var(--text-secondary); font-size: 14px;">
                                ${goal.currentValue} / ${goal.targetValue} ${goal.unit}
                            </span>
                        </div>
                        <div class="progress-percentage">${goal.progress}%</div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" style="width: ${goal.progress}%"></div>
                    </div>
                    <div class="progress-stats">
                        <span>üî• ${goal.streak} dagars streak</span>
                        <span>Senast aktiv: ${goal.lastCheckin}</span>
                    </div>
                </div>
                
                <div class="milestones-section">
                    <div class="milestones-title">üéØ Milstolpar</div>
                    <div class="milestone-track">
                        ${milestonesHtml}
                    </div>
                </div>
                
                <div class="energy-impact">
                    <span class="energy-impact-icon">üìä</span>
                    <span class="energy-impact-text">
                        ${goal.energy === 'boost' ? 'Detta m√•l √∂kar ditt hum√∂r med i snitt' : 
                          goal.energy === 'maintain' ? 'Detta m√•l h√•ller din energi stabil p√•' : 
                          'Detta m√•l √§r kr√§vande men ger l√•ngsiktig tillfredsst√§llelse'}
                    </span>
                    <span class="energy-impact-value">${goal.progress > 50 ? '+18%' : '+12%'}</span>
                </div>
                
                ${goal.progress > 0 && goal.progress < 100 ? `
                <div class="compassion-pause">
                    <span>üíõ</span>
                    <span>K√§nns det tufft? Det √§r okej att pausa utan skuld.</span>
                    <button onclick="pauseGoal(${goal.id})">Pausa</button>
                </div>
                ` : ''}
                
                <div style="margin-top: 16px; display: flex; gap: 12px;">
                    <button class="btn btn-primary" style="flex: 1;" onclick="logProgress(${goal.id})">
                        + Logga framsteg
                    </button>
                    <button class="btn btn-ghost" onclick="celebrateGoal(${goal.id})">
                        üéâ Fira
                    </button>
                </div>
            `;
            
            return div;
        }
        
        // Rendera vinnare
        function renderWins() {
            const grid = document.getElementById('winsGrid');
            grid.innerHTML = wins.map(w => `
                <div class="win-card">
                    <div class="win-emoji">${w.emoji}</div>
                    <div class="win-text">${w.text}</div>
                    <div class="win-date">${w.date}</div>
                </div>
            `).join('');
        }
        
        // Rendera heatmap
        function renderHeatmap() {
            const grid = document.getElementById('heatmapGrid');
            const levels = ['level-0', 'level-1', 'level-2', 'level-3', 'level-4'];
            
            grid.innerHTML = '';
            for (let i = 0; i < 49; i++) {
                const level = Math.floor(Math.random() * 5);
                const cell = document.createElement('div');
                cell.className = `heatmap-cell ${levels[level]}`;
                cell.title = `Dag ${i + 1}: ${['Ingen aktivitet', 'L√•g', 'Medium', 'H√∂g', 'Mycket h√∂g'][level]}`;
                grid.appendChild(cell);
            }
        }
        
        // Tab-v√§xling
        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.goals-tab').forEach(t => t.classList.remove('active'));
            event.target.closest('.goals-tab').classList.add('active');
            
            // Filtrera m√•l (simplified for demo)
            if (tab === 'completed') {
                document.getElementById('goalsGrid').innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üèÜ</div>
                        <div class="empty-title">Fantastiskt jobbat!</div>
                        <div class="empty-text">Du har avklarat 12 m√•l. Dina vunna m√•l finns i historiken.</div>
                    </div>
                `;
            } else if (tab === 'paused') {
                document.getElementById('goalsGrid').innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">‚è∏Ô∏è</div>
                        <div class="empty-title">Pausade m√•l</div>
                        <div class="empty-text">Du har 2 m√•l p√• paus. Ta hand om dig - det √§r okej att vila.</div>
                        <button class="btn btn-primary">Visa pausade m√•l</button>
                    </div>
                `;
            } else {
                renderGoals();
            }
        }
        
        // Modal funktioner
        function openGoalModal() {
            document.getElementById('goalModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeGoalModal() {
            document.getElementById('goalModal').classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Form-hantering
        function selectDimension(element, dimension) {
            document.querySelectorAll('.dimension-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            selectedDimension = dimension;
        }
        
        function selectEnergy(element, energy) {
            document.querySelectorAll('.energy-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            selectedEnergy = energy;
        }
        
        function saveGoal(event) {
            event.preventDefault();
            
            const newGoal = {
                id: goals.length + 1,
                title: document.getElementById('goalTitle').value,
                description: document.getElementById('goalDescription').value,
                deadline: document.getElementById('goalDeadline').value,
                dimension: selectedDimension || 'practical',
                dimensionName: selectedDimension ? selectedDimension.charAt(0).toUpperCase() + selectedDimension.slice(1) : 'Vardagligt',
                energy: selectedEnergy,
                progress: 0,
                milestones: [
                    { name: "Start", completed: true },
                    { name: "25%", completed: false },
                    { name: "50%", completed: false },
                    { name: "75%", completed: false },
                    { name: "100%", completed: false }
                ],
                currentValue: 0,
                targetValue: 100,
                unit: "%",
                streak: 0,
                lastCheckin: new Date().toISOString().split('T')[0]
            };
            
            goals.push(newGoal);
            renderGoals();
            closeGoalModal();
            
            // Celebration
            alert(`üéØ "${newGoal.title}" skapat!\n\nüí° AI-insikt: M√•l kopplade till "${newGoal.dimensionName}" har 34% h√∂gre framg√•ngsgrad n√§r du checkar in dagligen.`);
        }
        
        // AI-funktioner
        function applyAISuggestion() {
            alert(`‚úÖ Schemat justerat!\n\n"Springa 5km" har flyttats till:\n‚Ä¢ Tisdagar kl 07:00\n‚Ä¢ Torsdagar kl 07:00\n\nDin f√∂rutsagda framg√•ng: 89% (upp fr√•n 75%)`);
        }
        
        function generateNewSuggestion() {
            const random = aiSuggestions[Math.floor(Math.random() * aiSuggestions.length)];
            document.getElementById('aiCoachText').textContent = random;
        }
        
        // M√•l-hantering
        function logProgress(goalId) {
            const goal = goals.find(g => g.id === goalId);
            if (goal) {
                const increment = prompt(`Hur mycket vill du logga f√∂r "${goal.title}"?\nNuvarande: ${goal.currentValue} ${goal.unit}\nM√•l: ${goal.targetValue} ${goal.unit}`, "1");
                if (increment) {
                    goal.currentValue = Math.min(goal.targetValue, goal.currentValue + parseFloat(increment));
                    goal.progress = Math.round((goal.currentValue / goal.targetValue) * 100);
                    goal.streak++;
                    goal.lastCheckin = new Date().toISOString().split('T')[0];
                    
                    // Update milestones
                    goal.milestones.forEach((m, i) => {
                        const threshold = (i / (goal.milestones.length - 1)) * 100;
                        if (goal.progress >= threshold) m.completed = true;
                    });
                    
                    renderGoals();
                    
                    if (goal.progress >= 100) {
                        alert(`üéâ GRATTIS!\n\nDu har n√•tt ditt m√•l:\n"${goal.title}"\n\nEn ny vinst har lagts till din Vinnarv√§gg! üèÜ`);
                    }
                }
            }
        }
        
        function celebrateGoal(goalId) {
            const goal = goals.find(g => g.id === goalId);
            alert(`üéâ Celebration mode!\n\nDu har k√§mpat i ${goal.streak} dagar med "${goal.title}"!\n\nüí≠ Din kompis Anna skulle s√§ga:\n"S√• stolt √∂ver dig! Forts√§tt s√•! üí™"`);
        }
        
        function pauseGoal(goalId) {
            if (confirm("üíõ √Ñr du s√§ker p√• att du vill pausa detta m√•l?\n\nKom ih√•g: Det √§r okej att vila. Din streak sparas och du kan √•teruppta n√§r du √§r redo.")) {
                alert("‚è∏Ô∏è M√•let pausat. Ta hand om dig! üå±");
            }
        }
        
        // Mountain climber position
        function updateMountainClimber() {
            const avgProgress = goals.reduce((sum, g) => sum + g.progress, 0) / goals.length;
            const climber = document.getElementById('mountainClimber');
            const baseLeft = 20;
            const maxLeft = 80;
            const leftPos = baseLeft + (avgProgress / 100) * (maxLeft - baseLeft);
            const bottomPos = 20 + (avgProgress / 100) * 50;
            
            climber.style.left = leftPos + '%';
            climber.style.bottom = bottomPos + '%';
        }
        
        // Initiera
        renderGoals();
        renderWins();
        renderHeatmap();
        updateMountainClimber();
        
        // St√§ng modal vid klick utanf√∂r
        document.getElementById('goalModal').addEventListener('click', function(e) {
            if (e.target === this) closeGoalModal();
        });
        // Sidebar Toggle Functionality
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('collapsed');
            localStorage.setItem('sidebarCollapsed', sidebar.classList.contains('collapsed'));
        }
        
        function toggleSubmenu(element) {
            const sidebar = document.getElementById('sidebar');
            if (sidebar.classList.contains('collapsed')) {
                sidebar.classList.remove('collapsed');
            }
            element.classList.toggle('expanded');
            const submenu = element.nextElementSibling;
            if (submenu && submenu.classList.contains('nav-submenu')) {
                submenu.classList.toggle('expanded');
            }
        }
        
        function toggleMobileSidebar() {
            document.getElementById('sidebar').classList.toggle('mobile-open');
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('sidebar');
            if (localStorage.getItem('sidebarCollapsed') === 'true') {
                sidebar.classList.add('collapsed');
            }
        });
    </script>
</body>
</html>
